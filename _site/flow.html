<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Effect Tool | PDF Tools</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container flow-container">
        

        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script defer src="/assets/js/material.min.js"></script>

<link rel="stylesheet" href="/assets/css/cssbuild/style.css">
<link rel="stylesheet" href="/assets/css/test.css">
<link rel="stylesheet" href="/assets/css/emoji-modal.css">
<link rel="stylesheet" href="/assets/css/media-upload.css">
<link rel="stylesheet" href="/assets/css/shepherd.css">
<link rel="stylesheet" href="/assets/css/tools-shared.css">
<link rel="stylesheet" href="/assets/css/mui.min.css">

<style>
    /* Enhanced Styles for Flow Tool - FINAL SCROLL FIX */
    html {
        height: 100%;
        overflow: auto;
    }

    body {
        width: 100%;
        height: auto;
        min-height: 100%;
        margin: 0;
        padding: 0 0 100px 0 !important;
        /* Force bottom padding */
        overflow-y: visible !important;
        /* Always show scrollbar to prevent layout shift */
        overflow-x: hidden;
        position: static !important;
        font-family: 'Inter', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        background-color: #f0f2f5;
        color: #333;
        display: block !important;
    }

    /* Aggressive Container Overrides */
    /* Aggressive Container Overrides */
    .flow-container,
    .demo-container,
    .demo-container.mdl-grid,
    .mdl-grid,
    .demo-content,
    .mdl-cell,
    .mdl-cell--12-col {
        max-width: 100% !important;
        width: 100% !important;
        height: auto !important;
        min-height: 0 !important;
        display: block !important;
        padding: 0 !important;
        margin: 0 auto !important;
        /* Center the container horizontally */
        overflow: visible !important;
        position: relative !important;
        /* Changed from static to relative for containment */
        transform: none !important;
        flex: none !important;
        inset: auto !important;
        /* Reset any fixed positioning coordinates */
        justify-content: flex-start !important;
        /* Prevent center alignment clipping */
        align-items: flex-start !important;
    }

    .flow-tool-page {
        position: relative;
        display: block;
        width: 100%;
        height: auto;
        overflow: visible;
        padding: 40px 20px;
        box-sizing: border-box;
    }




    .flow-tool-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        padding: 40px;
        max-width: 1200px;
        margin: 0 auto;
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    h1 {
        color: #1a1a1a;
        font-weight: 800;
        margin-bottom: 16px;
        font-size: 2.5rem;
        letter-spacing: -0.5px;
    }

    .flow-tool-intro {
        margin-bottom: 32px;
        color: #555;
        line-height: 1.7;
        font-size: 1.15rem;
        max-width: 800px;
    }

    /* Panels and Sections */
    .flow-global-controls,
    .flow-canvas-shell,
    .flow-region-panel,
    .flow-extra {
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
        margin-bottom: 24px;
        padding: 24px;
        transition: box-shadow 0.3s ease;
    }

    .flow-global-controls:hover,
    .flow-canvas-shell:hover,
    .flow-region-panel:hover,
    .flow-extra:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
    }

    /* Buttons (Teal) */
    .mui-btn--raised {
        background-color: #009688;
        color: white;
        border-radius: 8px;
        text-transform: none;
        font-weight: 600;
        padding: 0 24px;
        height: 42px;
        line-height: 42px;
        box-shadow: 0 4px 10px rgba(0, 150, 136, 0.2);
        transition: all 0.2s ease;
        letter-spacing: 0.3px;
    }

    .mui-btn--raised:hover {
        background-color: #00796b;
        box-shadow: 0 6px 15px rgba(0, 150, 136, 0.3);
        transform: translateY(-1px);
    }

    .mui-btn--flat {
        color: #555;
        text-transform: none;
        font-weight: 600;
        border-radius: 8px;
        padding: 0 16px;
        height: 42px;
        line-height: 42px;
    }

    .mui-btn--flat:hover {
        background-color: #e0f2f1;
        color: #009688;
    }

    /* Inputs and Controls */
    .flow-field label {
        font-weight: 600;
        color: #444;
        margin-bottom: 8px;
        display: block;
        font-size: 0.9rem;
    }

    input[type=range] {
        accent-color: #009688;
        height: 6px;
        border-radius: 3px;
        background: #e0e0e0;
    }

    .mui-textfield>input {
        font-family: inherit;
        border-radius: 6px;
        border: 1px solid #ccc;
        padding: 10px;
        width: 100%;
        box-sizing: border-box;
    }

    /* Styled Select Dropdowns */
    .mui-select {
        position: relative;
    }

    .mui-select>select {
        font-family: inherit;
        border-radius: 6px;
        border: 1px solid #ccc;
        padding: 10px 36px 10px 12px;
        /* Extra right padding for arrow */
        width: 100%;
        box-sizing: border-box;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-color: white;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23009688'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 8px center;
        background-size: 24px;
        cursor: pointer;
        font-size: 0.95rem;
        color: #333;
    }

    .mui-textfield>input:focus,
    .mui-select>select:focus {
        border-color: #009688;
        outline: none;
        box-shadow: 0 0 0 2px rgba(0, 150, 136, 0.1);
    }

    .mui-select>select:hover {
        border-color: #009688;
    }

    /* Canvas Area */
    .flow-canvas-panel {
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #eee;
        background: #fafafa;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Aspect Ratio & Zoom */
    .flow-canvas-panel canvas {
        width: 100% !important;
        height: auto !important;
        object-fit: contain;
        max-height: 80vh;
        /* Prevent it from being too tall on large screens */
        display: block;
    }

    /* Details/Summary */
    details.flow-extra>summary,
    details.flow-global-controls>summary,
    details.flow-region-panel>summary {
        font-weight: 700;
        cursor: pointer;
        padding: 10px 0;
        color: #333;
        font-size: 1.1rem;
        outline: none;
        list-style: none;
        /* Hide default marker in some browsers */
    }

    details.flow-extra>summary::-webkit-details-marker,
    details.flow-global-controls>summary::-webkit-details-marker,
    details.flow-region-panel>summary::-webkit-details-marker {
        display: none;
    }

    /* Add custom arrow */
    details.flow-extra>summary::after,
    details.flow-global-controls>summary::after,
    details.flow-region-panel>summary::after {
        content: '\25BC';
        /* Down arrow */
        float: right;
        font-size: 0.8em;
        transition: transform 0.2s;
    }

    details[open].flow-extra>summary::after,
    details[open].flow-global-controls>summary::after,
    details[open].flow-region-panel>summary::after {
        transform: rotate(180deg);
    }

    details.flow-extra[open]>summary,
    details.flow-global-controls[open]>summary,
    details.flow-region-panel[open]>summary {
        margin-bottom: 16px;
        border-bottom: 1px solid #eee;
    }

    /* Collapsible Panels */
    .flow-global-controls,
    .flow-region-panel,
    .flow-extra {
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
        margin-bottom: 24px;
        padding: 24px;
        transition: box-shadow 0.3s ease;
    }

    /* Region Cards */
    .flow-region-card {
        border: 1px solid #eee;
        border-radius: 8px;
        margin-bottom: 12px;
        transition: all 0.2s;
    }

    .flow-region-card:hover {
        border-color: #009688;
    }

    .flow-region-heading {
        font-weight: 600;
    }

    /* New Layout Styles */
    .flow-layout-container {
        display: flex;
        gap: 24px;
        align-items: flex-start;
    }

    .flow-layout-main {
        flex: 1;
        min-width: 0;
    }

    .flow-layout-sidebar {
        width: 350px;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    .flow-layout-sidebar .mui-panel {
        margin-bottom: 0;
    }

    @media (max-width: 1000px) {
        .flow-layout-container {
            flex-direction: column;
        }

        .flow-layout-sidebar {
            width: 100%;
        }
    }
</style>
<script src="/assets/js/jquery-3.5.1.min.js"></script>
<script type="module" src="/assets/js/flow.js" defer></script>


<main class="flow-tool-page">
    <div class="demo-container mdl-grid">
        <div
            class="demo-content mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--12-col flow-tool-card">


            <h1>Flow Effect Tool</h1>
            <p class="flow-tool-intro">
                Paint animated regions on top of an image, then blend motion and atmospheric overlays to turn still
                shots into looping videos.
                Use the controls below to adjust jiggle, speed, overlays, and export options.
            </p>

            <div class="flow-tool-wrapper" data-testid="flow-tool"
                data-flow-default-image="https://netwrckstatic.netwrck.com/static/uploads/epic-fort-under-siege-smoke-and-waterfall-fortress-1760226541-8fc20524.webp">

                <div class="flow-layout-container">
                    <div class="flow-layout-main">
                        <section class="flow-canvas-shell mui-panel">
                            <div class="flow-canvas-panel" data-flow-section="canvas">
                                <canvas id="canvas" width="960" height="540" data-flow-surface="canvas"></canvas>
                                <div id="canvasDirectionOverlay" class="flow-direction-overlay" aria-hidden="true">
                                </div>
                            </div>
                            <p class="flow-tool-shortcuts">
                                Shortcuts:
                                <strong>Ctrl/Cmd+Z</strong> undo,
                                <strong>H</strong> toggle guides,
                                <strong>U</strong> undo,
                                <strong>E</strong> toggle eraser,
                                hold <strong>Ctrl</strong>/<strong>Cmd</strong> while painting to temporarily erase.
                            </p>
                        </section>
                    </div>
                    <div class="flow-layout-sidebar">
                        <details class="flow-global-controls mui-panel" open>
                            <summary>Image & Global</summary>
                            <div class="flow-global-row">
                                <div class="flow-field">
                                    <label for="imageLoader">Image</label>
                                    <input class="flow-file-input" type="file" id="imageLoader" accept="image/*"
                                        data-flow-control="image">
                                </div>
                                <div class="flow-field flow-slider">
                                    <label for="brushSize">Brush Size</label>
                                    <input type="range" id="brushSize" min="1" max="120" value="20"
                                        data-flow-control="brushSize">
                                </div>
                                <div class="flow-field flow-slider">
                                    <label for="feather">Feather</label>
                                    <input type="range" id="feather" min="0" max="40" value="5"
                                        data-flow-control="feather">
                                </div>
                                <div class="flow-field flow-slider">
                                    <label for="jiggle">Jiggle</label>
                                    <input type="range" id="jiggle" min="0" max="20" value="0"
                                        data-flow-control="jiggle">
                                </div>
                            </div>
                            <div class="flow-global-row">
                                <div class="flow-field flow-slider">
                                    <label for="speed">Base Speed</label>
                                    <input type="range" id="speed" min="0.1" max="20" step="0.1" value="6"
                                        data-flow-control="speed">
                                </div>
                                <div class="flow-field flow-select">
                                    <div class="mui-select">
                                        <select id="loopMode" data-flow-control="loopMode">
                                            <option value="loop" selected>Loop</option>
                                            <option value="pingpong">Ping-Pong</option>
                                            <option value="once">Once</option>
                                        </select>
                                        <label for="loopMode">Loop Mode</label>
                                    </div>
                                </div>
                                <div class="flow-actions">
                                    <button id="startBtn" type="button" class="mui-btn mui-btn--raised"
                                        data-flow-action="start">Start</button>
                                    <button id="pauseBtn" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="pause">Pause</button>
                                    <button id="eraserToggleBtn" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="toggle-eraser">Enable Eraser</button>
                                    <button id="clearBtn" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="clear">Clear</button>
                                </div>
                            </div>
                        </details>
                        <details class="flow-region-panel mui-panel" open>
                            <summary>Regions</summary>
                            <div class="flow-region-toolbar">
                                <div class="flow-region-actions">
                                    <button id="toggleOverlayBtn" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="toggle-overlay">Hide Guides</button>
                                    <button id="addRegionBtn" type="button" class="mui-btn mui-btn--raised"
                                        data-flow-action="add-region">New Region</button>
                                </div>
                            </div>
                            <div id="regionList" class="flow-region-list" data-flow-region-list></div>
                        </details>
                        <details class="flow-extra mui-panel" open>
                            <summary>Atmospheric Overlays</summary>
                            <div class="flow-extra-grid">
                                <div class="flow-field flow-select">
                                    <div class="mui-select">
                                        <select id="overlayType" data-flow-control="overlayType">
                                            <option value="none" selected>None</option>
                                            <option value="rain">Rain</option>
                                            <option value="snow">Snow</option>
                                        </select>
                                        <label for="overlayType">Overlay Type</label>
                                    </div>
                                </div>
                                <div class="flow-field flow-slider">
                                    <label for="overlayIntensity">Intensity</label>
                                    <input type="range" id="overlayIntensity" min="0" max="3" step="0.1" value="1"
                                        data-flow-control="overlayIntensity">
                                </div>
                                <div class="flow-field flow-slider">
                                    <label for="overlayWind">Wind</label>
                                    <input type="range" id="overlayWind" min="-200" max="200" step="10" value="0"
                                        data-flow-control="overlayWind">
                                </div>
                                <div class="flow-field flow-slider">
                                    <label for="overlaySize">Scale</label>
                                    <input type="range" id="overlaySize" min="0.25" max="4" step="0.25" value="1"
                                        data-flow-control="overlaySize">
                                </div>
                                <div class="flow-actions">
                                    <button id="overlayRegenerate" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="regenerate-overlay">Regenerate Overlay</button>
                                </div>
                            </div>
                        </details>
                        <details class="flow-extra mui-panel" open>
                            <summary>Export</summary>
                            <div class="flow-extra-grid">
                                <div class="flow-field flow-text">
                                    <div class="mui-textfield">
                                        <input type="number" id="duration" min="1" value="10"
                                            data-flow-control="duration">
                                        <label for="duration">Duration (s)</label>
                                    </div>
                                </div>
                                <div class="flow-field flow-text">
                                    <div class="mui-textfield">
                                        <input type="number" id="fps" min="1" max="60" value="24"
                                            data-flow-control="fps">
                                        <label for="fps">FPS</label>
                                    </div>
                                </div>
                                <div class="flow-field flow-text">
                                    <div class="mui-textfield">
                                        <input type="text" id="filename" placeholder="flow.webm"
                                            data-flow-control="filename">
                                        <label for="filename">Filename</label>
                                    </div>
                                </div>
                                <div class="flow-actions">
                                    <button id="exportBtn" type="button" class="mui-btn mui-btn--raised"
                                        data-flow-action="export">Export</button>
                                    <button id="cancelExportBtn" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="cancel-export">Cancel Export</button>
                                    <button id="exportMaskBtn" type="button" class="mui-btn mui-btn--flat"
                                        data-flow-action="export-mask">Download Mask</button>
                                </div>
                                <span id="progressText" class="flow-progress-text" aria-live="polite"></span>
                            </div>
                        </details>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <template id="flowRegionTemplate">
        <article class="flow-region-card mui-panel" data-flow-region>
            <header class="flow-region-card-header">
                <div class="flow-region-heading">
                    <span class="flow-region-chip" data-region-chip aria-hidden="true"></span>
                    <button type="button" class="flow-region-select" data-region-action="select"></button>
                </div>
                <div class="flow-region-card-actions">
                    <button type="button" class="mui-btn mui-btn--flat"
                        data-region-action="duplicate">Duplicate</button>
                    <button type="button" class="mui-btn mui-btn--flat" data-region-action="delete">Remove</button>
                </div>
            </header>
            <div class="flow-region-card-body">
                <div class="flow-direction-control" data-region-field="direction">
                    <canvas width="100" height="100" data-region-direction-surface></canvas>
                    <div class="flow-direction-readout" data-region-direction-label></div>
                </div>
                <div class="flow-region-grid">
                    <div class="flow-field flow-switch">
                        <label>
                            <input type="checkbox" data-region-control="crossfadeEnabled">
                            <span>Crossfade</span>
                        </label>
                    </div>
                    <div class="flow-field flow-switch">
                        <label>
                            <input type="checkbox" data-region-control="crossfadeOscillate">
                            <span>Oscillate</span>
                        </label>
                    </div>
                    <div class="flow-field flow-slider">
                        <label>Travel Speed</label>
                        <input type="range" min="0" max="3" step="0.05" value="1" data-region-control="speed">
                    </div>
                    <div class="flow-field flow-slider">
                        <label>Crossfade Speed</label>
                        <input type="range" min="0.05" max="2" step="0.05" value="0.3"
                            data-region-control="crossfadeSpeed">
                    </div>
                    <div class="flow-field flow-slider">
                        <label>Crossfade Min</label>
                        <input type="range" min="0" max="1" step="0.01" value="0.2" data-region-control="crossfadeMin">
                    </div>
                    <div class="flow-field flow-slider">
                        <label>Crossfade Max</label>
                        <input type="range" min="0" max="1" step="0.01" value="0.9" data-region-control="crossfadeMax">
                    </div>
                </div>
            </div>
        </article>
    </template>
</main>


<dialog id="upres-dialog" class="mdl-dialog mdl-dialog--fullscreen">
    <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button mdl-js-button mdl-button--raised close">
            Close
        </button>
    </div>
    <div class="mdl-dialog__content">
        <h4 class="mdl-dialog__title">High Resolution</h4>
        <div id="high-res-result-image" style="height: 100%; width:100%">
            <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
        </div>
    </div>
</dialog>

<dialog id="video-dialog" class="mdl-dialog mdl-dialog--fullscreen">
    <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button mdl-js-button mdl-button--raised close">
            Close
        </button>
    </div>
    <div class="mdl-dialog__content">
        <h4 class="mdl-dialog__title">Creating Video</h4>
        <div id="high-res-result-video" style="width: 100%; height: 73vh">
            <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
        </div>
    </div>
</dialog>
    </div>
</body>

</html>